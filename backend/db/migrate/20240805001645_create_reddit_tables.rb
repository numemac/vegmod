class CreateRedditTables < ActiveRecord::Migration[7.1]
#   {
#     "vegancirclejerk": {
#         "can_assign_link_flair": true,
#         "can_assign_user_flair": true,
#         "created_utc": 1303859608.0,
#         "description": "we absolutely respect veganism and what it stands for but\n\n--\n## **Read the rules** OR risk becoming '*accidentally vegan*':\n\n1. [Vegans only.](https://www.reddit.com/r/vegancirclejerk/about/wiki/rules/#wiki_1._vegans_only.)\n\n2. [Mark animal products/abuse as NSFW.](https://www.reddit.com/r/vegancirclejerk/wiki/rules/#wiki_2._mark_animal_abuse_as_nsfw.)\n\n3. [This is an anarchist space.](https://www.reddit.com/r/vegancirclejerk/wiki/rules/#wiki_3._this_is_an_anarchist_space.)\n\n4. [We do not permit violence.](https://www.reddit.com/r/vegancirclejerk/wiki/rules/#wiki_4._we_do_not_permit_violence.)\n\n5. [Keep it fun.](https://www.reddit.com/r/vegancirclejerk/wiki/rules/#wiki_5._keep_it_fun.)\n\n6. [No support of PBC.](https://www.reddit.com/r/vegancirclejerk/wiki/rules/#wiki_6._no_support_of_pbc.)\n\n**You must also join:** r/vegancirclejerkchat\"\n\n---",
#         "description_html": "<!-- SC_OFF --><div class=\"md\"><p>we absolutely respect veganism and what it stands for but</p>\n\n<h2></h2>\n\n<h2><strong>Read the rules</strong> OR risk becoming &#39;<em>accidentally vegan</em>&#39;:</h2>\n\n<ol>\n<li><p><a href=\"https://www.reddit.com/r/vegancirclejerk/about/wiki/rules/#wiki_1._vegans_only.\">Vegans only.</a></p></li>\n<li><p><a href=\"https://www.reddit.com/r/vegancirclejerk/wiki/rules/#wiki_2._mark_animal_abuse_as_nsfw.\">Mark animal products/abuse as NSFW.</a></p></li>\n<li><p><a href=\"https://www.reddit.com/r/vegancirclejerk/wiki/rules/#wiki_3._this_is_an_anarchist_space.\">This is an anarchist space.</a></p></li>\n<li><p><a href=\"https://www.reddit.com/r/vegancirclejerk/wiki/rules/#wiki_4._we_do_not_permit_violence.\">We do not permit violence.</a></p></li>\n<li><p><a href=\"https://www.reddit.com/r/vegancirclejerk/wiki/rules/#wiki_5._keep_it_fun.\">Keep it fun.</a></p></li>\n<li><p><a href=\"https://www.reddit.com/r/vegancirclejerk/wiki/rules/#wiki_6._no_support_of_pbc.\">No support of PBC.</a></p></li>\n</ol>\n\n<p><strong>You must also join:</strong> <a href=\"/r/vegancirclejerkchat\">r/vegancirclejerkchat</a>&quot;</p>\n\n<hr/>\n</div><!-- SC_ON -->",
#         "display_name": "vegancirclejerk",
#         "flair_templates": [
#             {
#                 "allowable_content": "text",
#                 "text": "custom",
#                 "text_color": "dark",
#                 "mod_only": false,
#                 "background_color": "#dadada",
#                 "id": "dc3e0eb8-23a3-11ec-b70d-8630e08d49ce",
#                 "css_class": "",
#                 "max_emojis": 10,
#                 "richtext": [
#                     {
#                         "e": "text",
#                         "t": "custom"
#                     }
#                 ],
#                 "text_editable": true,
#                 "override_css": false,
#                 "type": "richtext"
#             }
#         ],
#         "id": "2sgfh",
#         "name": "t5_2sgfh",
#         "over18": false,
#         "public_description": "we absolutely respect veganism and what it stands for but",
#         "spoilers_enabled": true,
#         "subscribers": 97923,
#         "_type": "Subreddit",
#         "_serialized_at": 1722816904.078838,
#         "submissions": [
#             {
#                 "author": {
#                     "comment_karma": 4717,
#                     "created_utc": 1611169296.0,
#                     "has_verified_email": true,
#                     "icon_img": "https://styles.redditmedia.com/t5_3r7jhq/styles/profileIcon_n4k9pis21i9a1.png?width=256&height=256&crop=256:256,smart&s=471d42a829f712d36fe932ba45e268a24bbcf5e3",
#                     "id": "9wt247tn",
#                     "is_employee": false,
#                     "is_mod": false,
#                     "is_gold": false,
#                     "name": "PoorDunce",
#                     "_type": "Redditor",
#                     "_serialized_at": 1722816910.7389042
#                 },
#                 "author_flair_text": null,
#                 "created_utc": 1722814508.0,
#                 "distinguished": null,
#                 "edited": false,
#                 "id": "1ek9a7s",
#                 "is_original_content": false,
#                 "is_self": true,
#                 "link_flair_template_id": "247a150e-ba20-11ee-a5ad-86f4f280a176",
#                 "link_flair_text": "YOUR MOM, MY MILK :snoo_dealwithit:",
#                 "locked": false,
#                 "name": "t3_1ek9a7s",
#                 "num_comments": 2,
#                 "over_18": false,
#                 "permalink": "/r/vegancirclejerk/comments/1ek9a7s/cooking_mama_yelled_at_me_for_being_vegan/",
#                 "poll_data": null,
#                 "score": 6,
#                 "selftext": "https://youtu.be/vMAJjSA4y3U?si=cH9trZEFqJO_wpWt",
#                 "spoiler": false,
#                 "stickied": false,
#                 "title": "Cooking Mama yelled at me for being vegan :(",
#                 "upvote_ratio": 1.0,
#                 "url": "https://www.reddit.com/r/vegancirclejerk/comments/1ek9a7s/cooking_mama_yelled_at_me_for_being_vegan/",
#                 "_type": "Submission",
#                 "_serialized_at": 1722816910.7389133
#             }
#         ],
#         "comments": [
#             {
#                 "author": {
#                     "comment_karma": 16107,
#                     "created_utc": 1634412208.0,
#                     "has_verified_email": true,
#                     "icon_img": "https://styles.redditmedia.com/t5_56uxw8/styles/profileIcon_ewziwi2unzca1.png?width=256&height=256&crop=256:256,smart&s=904e4dfbe9411b2b6409f9e01e1904aaa89f2529",
#                     "id": "fjuykv9a",
#                     "is_employee": false,
#                     "is_mod": false,
#                     "is_gold": false,
#                     "name": "ABoyNamedMary",
#                     "_type": "Redditor",
#                     "_serialized_at": 1722816920.7402194
#                 },
#                 "body": "wowie poor dunce from youtube has graced us with his presence :)",
#                 "body_html": "<div class=\"md\"><p>wowie poor dunce from youtube has graced us with his presence :)</p>\n</div>",
#                 "created_utc": 1722815233.0,
#                 "distinguished": null,
#                 "edited": false,
#                 "id": "lgj3guk",
#                 "is_submitter": false,
#                 "link_id": "t3_1ek9a7s",
#                 "parent_id": "t3_1ek9a7s",
#                 "permalink": "/r/vegancirclejerk/comments/1ek9a7s/cooking_mama_yelled_at_me_for_being_vegan/lgj3guk/",
#                 "score": 2,
#                 "stickied": false,
#                 "subreddit_id": "t5_2sgfh",
#                 "_type": "Comment",
#                 "_serialized_at": 1722816920.7402318
#             }
#         ],
#         "removal_reasons": [
#             {
#                 "id": "db896093-df8d-4768-9a61-5f8e63e60c11",
#                 "message": "Your submission breaks rule #1: No social media or messaging screenshots.\n\nWe remove all screenshots of Reddit, Lemmy, kbin, TikTok, Twitter, Threads, Mastodon, Facebook, Instagram, YouTube, Discord, iMessage, SMS, Matrix, Snapchat, Telegram, WeChat, Whatsapp, Medium, Quora, Twitch, LinkedIn, Tumblr, blogs, personal websites, etc.\n\nVCJ permits screenshots of news articles, business websites, petitions, fundraisers, political campaigns, search results, reviews, e-commerce, and informational pages.\n\n**You may post social media and messaging screenshots to r/animalhaters.**",
#                 "title": "Screenshot of social media or messaging.",
#                 "_type": "RemovalReason",
#                 "_serialized_at": 1722816924.2296116
#             }
#         ],
#         "reports": []
#     }
# }
  def change
    create_table :subreddit do |t|
      t.boolean :can_assign_link_flair
      t.boolean :can_assign_user_flair
      t.float :created_utc
      t.text :description
      t.text :description_html
      t.string :display_name, null: false
      t.index :display_name, unique: true
      t.string :external_id, null: false
      t.index :external_id, unique: true
      t.string :name, null: false
      t.index :name, unique: true
      t.boolean :over18
      t.text :public_description
      t.boolean :spoilers_enabled
      t.integer :subscribers
      t.timestamps
    end

    create_table :flair_template do |t|
      t.string :allowable_content
      t.string :text
      t.string :text_color
      t.boolean :mod_only
      t.string :background_color
      t.string :external_id, null: false
      t.index :external_id, unique: true
      t.string :css_class
      t.integer :max_emojis
      t.json :richtext
      t.boolean :text_editable
      t.boolean :override_css
      t.string :type
      t.timestamps
    end

    create_table :redditor do |t|
      t.integer :comment_karma
      t.float :created_utc
      t.boolean :has_verified_email
      t.string :icon_img
      t.string :external_id, null: false
      t.index :external_id, unique: true
      t.boolean :is_employee
      t.boolean :is_mod
      t.boolean :is_gold
      t.string :name, null: false
      t.index :name, unique: true
      t.timestamps
    end

    create_table :submission do |t|
      t.integer :author_id
      t.string :author_flair_text, null: true
      t.float :created_utc
      t.string :distinguished, null: true
      t.boolean :edited
      t.string :external_id, null: false
      t.index :external_id, unique: true
      t.boolean :is_original_content
      t.boolean :is_self
      t.string :link_flair_template_id
      t.string :link_flair_text
      t.boolean :locked
      t.string :name
      t.integer :num_comments
      t.boolean :over_18
      t.string :permalink
      t.integer :poll_data_id, null: true
      t.integer :score
      t.boolean :selftext
      t.boolean :spoiler
      t.boolean :stickied
      t.string :title
      t.float :upvote_ratio
      t.string :url
      t.timestamps
    end

    create_table :comment do |t|
      t.integer :author_id
      t.text :body
      t.text :body_html
      t.float :created_utc
      t.boolean :distinguished, null: true
      t.boolean :edited
      t.string :external_id, null: false
      t.index :external_id, unique: true
      t.boolean :is_submitter
      t.string :link_id
      t.string :parent_id
      t.string :permalink
      t.integer :score
      t.boolean :stickied
      t.string :subreddit_id
      t.timestamps
    end

    create_table :reports do |t|
      t.integer :content_type # 0: submission, 1: comment
      t.integer :content_id
      t.integer :content_external_id
      t.timestamps
    end
  end
end
